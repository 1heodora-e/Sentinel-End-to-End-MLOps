[build]
builder = "dockerfile"
dockerfilePath = "backend/Dockerfile"
dockerContext = "."

[deploy]
startCommand = "uvicorn app:app --host 0.0.0.0 --port $PORT"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[env]
CUDA_VISIBLE_DEVICES = "-1"
TF_CPP_MIN_LOG_LEVEL = "2"
TF_FORCE_GPU_ALLOW_GROWTH = "true"
TF_XLA_FLAGS = "--tf_xla_cpu_global_jit=false"
TF_DISABLE_XLA = "1"